(this.webpackJsonpitem_manager=this.webpackJsonpitem_manager||[]).push([[0],{10:function(e,t,n){},22:function(e,t,n){e.exports=n(46)},28:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),u=(n(10),n(20)),l=n(3),i=n.n(l),s=n(21),m=n(4),d=n(2),p=n(8),f=n.n(p),g=(n(28),n(5)),v=n.n(g),b="/api/items",E=null,h={getAll:function(){return v.a.get(b)},create:function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(b,t);case 2:return n=e.sent,console.log(n.data),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return v.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){var t={headers:{Authorization:E}};return v.a.delete("".concat(b,"/").concat(e),t)},updateUsage:function(){var e=Object(m.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("".concat(b,"/").concat(t,"/usage"),n);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){E="bearer ".concat(e)}},y=function(e){var t=Object(a.useState)(!0),n=Object(d.a)(t,2),c=n[0],o=n[1],u={display:c?"none":""},l=0===e.item.usage.length?0:e.item.usage.map((function(e){return e.amount})).reduce((function(e,t){return e+t}));return r.a.createElement("div",{onClick:function(){o(!c)}},r.a.createElement("div",{className:"list-item-mini-info"},r.a.createElement("p",{style:{marginBottom:2,cursor:"pointer"}},e.item.name)),r.a.createElement("div",{className:"list-item-detail-info",style:u},r.a.createElement("p",{style:{fontSize:16,marginBottom:1,marginTop:1}},"used for ",l," ",e.item.units),r.a.createElement("p",{style:{fontSize:15,marginBottom:2}},"log new use"),e.item.common_usage.map((function(t){return r.a.createElement("button",{key:t,className:"usage-log-button",onClick:function(){return e.increaseUsage(e.item.id,t)}},t," ",e.item.units)})),r.a.createElement("p",null,r.a.createElement("a",{style:{backgroundColor:"grey",color:"white",textDecoration:"none",borderRadius:5,fontSize:18,padding:5,cursor:"pointer"},href:"/items/".concat(e.item.id)},"Show more"))))},O=function(e){var t=e.items.sort((function(e,t){return t.name.toUpperCase()-e.name.toUpperCase()}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Items"),t.map((function(t){return r.a.createElement(y,{key:t.id,item:t,increaseUsage:e.handleIncrease})})))},j=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),c=(n[0],n[1],Object(a.useState)(!1)),o=Object(d.a)(c,2),u=o[0],l=o[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),m=s[0],p=s[1],f=Object(a.useState)([]),g=Object(d.a)(f,2),v=g[0],b=g[1],E=Object(a.useState)(""),h=Object(d.a)(E,2),y=h[0],O=h[1],j=function(e){var t=e.target.value;p(t)},w={display:u?"":"none"},k={display:0===v.length?"none":""},S={display:""===y?"none":"",backgroundColor:"coral"},C={display:v.length>0?"":"none",backgroundColor:"teal"};return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){l(!u)},style:{cursor:"pointer"}},r.a.createElement("h3",null,"Add new item")),r.a.createElement("div",{style:w},r.a.createElement("form",{onSubmit:function(t){try{t.preventDefault();var n={name:t.target.name.value,units:t.target.units.value,usage:[],common_usage:v};e.handleAddItem(n),t.target.name.value="",t.target.units.value="",O(""),b([])}catch(r){var a="couldn't add new item due to an error: ".concat(r);alert(a)}}},"name: \u2003",r.a.createElement("input",{type:"text",name:"name"}),r.a.createElement("br",null),r.a.createElement("br",null),"What do you measure?",r.a.createElement("br",null),r.a.createElement("input",{onChange:j,type:"radio",id:"km",name:"units",value:"km"}),"distance \xa0",r.a.createElement("input",{onChange:j,type:"radio",id:"h",name:"units",value:"h"}),"time",r.a.createElement("br",null),r.a.createElement("br",null),"Add common usecases for the item",r.a.createElement("br",null),r.a.createElement("input",{onChange:function(e){var t=e.target.value;O(t)},value:y,type:"number"}),r.a.createElement("p",{style:S,onClick:function(e){var t=y;b(v.concat(t)),O("")}},"Add"),r.a.createElement("p",{style:k},"[",v.map((function(e){return r.a.createElement("a",null," ",e,m," ")})),"] \u2003 ",r.a.createElement("a",{style:C,onClick:function(){b([])}}," clear ")," "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",null,"Add a new item"),r.a.createElement("br",null),r.a.createElement("br",null))))},w=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),c=(n[0],n[1],Object(a.useState)([])),o=Object(d.a)(c,2),l=o[0],p=o[1],g=Object(a.useState)(""),v=Object(d.a)(g,2),b=v[0],E=v[1];if(Object(a.useEffect)((function(){h.getAll().then((function(e){p(e.data)}))}),[]),console.log(l),void 0===l)return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"})));var y=l.filter((function(e){return-1!==e.name.toLowerCase().indexOf(b.toLowerCase())})),w=function(){var e=Object(m.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.find((function(e){return e.id===t})),r=Object(s.a)({},a,{usage:a.usage.concat([{date:(new Date).toISOString(),amount:Number(n)}])}),console.log(r.usage.map((function(e){return e}))),e.next=5,h.update(t,r);case 5:p(l.map((function(e){return e.id!==t?e:r})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.create(t);case 3:n=e.sent,p([].concat(Object(u.a)(l),[n.data])),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("could not add '".concat(t.name,"' to items"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),r.a.createElement("input",{onChange:function(e){E(e.target.value)},value:b}),r.a.createElement(O,{items:y,handleIncrease:w}),r.a.createElement(j,{handleAddItem:k})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"}},[[22,1,2]]]);
//# sourceMappingURL=main.5a471e24.chunk.js.map